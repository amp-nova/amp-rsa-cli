{ 
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "{{cms.contentBaseUri}}/component-rule-based-content.json",

	"title": "Rule Based Content",
	"description": "",

	"allOf": [
		{
			"$ref": "http://bigcontent.io/cms/schema/v1/core#/definitions/content"
		}
	],
	
	"type": "object",
	"properties": {
		"active": {
			"type": "boolean",
			"title": "Active"
		},
		"priority": {
			"type": "number",
			"title": "Priority"
		},
        "rules": {
			"title": "Rules",
			"type": "object",
			"properties": {
				"productCategories": {
					"title": "Product Categories",
					"type": "object",
					"properties": {
						"values": {
							"type": "array",
							"ui:extension": {
								"name": "hierarchy-picker",
								"params": {
									"nodeId": "e581a38a-2311-4f62-9488-530a37e37d52"
								}
							},
							"items": {
								"allOf": [{
										"$ref": "http://bigcontent.io/cms/schema/v1/core#/definitions/content-reference"
									},
									{
										"properties": {
											"contentType": {
												"enum": [
													"{{cms.contentBaseUri}}/page-category.json"
												]
											}
										}
									}
								]
							}
						}
					}
				},
				"tags": {
					"title": "Tags",
					"type": "object",
					"properties": {
						"values": {
							"type": "array",
							"ui:extension": {
								"name": "hierarchy-picker",
								"params": {
									"nodeId": "508184f7-6833-42d7-a659-3f59e71f73a2"
								}
							},
							"items": {
								"allOf": [{
										"$ref": "http://bigcontent.io/cms/schema/v1/core#/definitions/content-link"
									},
									{
										"properties": {
											"contentType": {
												"enum": [
													"{{cms.contentBaseUri}}/taxonomy-tag.json"
												]
											}
										}
									}
								]
							}
						}
					}
				},
				"pageTypes": {
					"title": "Page Types",
					"type": "object",
					"properties": {
						"values": {
							"type": "array",
							"ui:extension": {
								"name": "hierarchy-picker",
								"params": {
									"nodeId": "508184f7-6833-42d7-a659-3f59e71f73a2"
								}
							},
							"items": {
								"allOf": [{
										"$ref": "http://bigcontent.io/cms/schema/v1/core#/definitions/content-link"
									},
									{
										"properties": {
											"contentType": {
												"enum": [
													"{{cms.contentBaseUri}}/taxonomy-page-type.json"
												]
											}
										}
									}
								]
							}
						}
					}
				}
			}
		},
		"content": {
			"title": "Component",
			"allOf": [
				{ "$ref": "http://bigcontent.io/cms/schema/v1/core#/definitions/content-link" },
				{
					"properties": {
						"contentType": { "$ref": "./lib-components.json#/definitions/anyComponent" }
					}
				}
			]
		}
    },
    
    "definitions": {
    }
}